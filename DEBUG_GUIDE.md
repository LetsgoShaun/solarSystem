# 🔍 GLB模型调试指南

## 已完成的修复

### ✅ 1. 缩放范围扩大
- **最小距离**: 10 → **1** （可以非常近距离观察）
- **最大距离**: 500 → **5000** （可以拉到很远）
- **缩放速度**: 1.0 → **2.0** （滚轮缩放更快）

### ✅ 2. 自动调试信息
刷新页面后，按 **F12** 打开浏览器控制台，会看到详细的模型结构信息。

---

## 📋 如何查看模型结构

### 步骤1：打开控制台
1. 按 `F12` 或 `Ctrl+Shift+I` (Mac: `Cmd+Option+I`)
2. 切换到 `Console` 标签页
3. 刷新页面

### 步骤2：查看调试信息

你会看到类似这样的输出：

```
========== GLB 模型结构调试信息 ==========
模型根节点: Scene {...}

[1] 对象信息:
  名称: Sun_Sphere
  类型: Mesh
  位置: x:0.00, y:0.00, z:0.00
  尺寸: 10.50 x 10.50 x 10.50
  父级: 根节点
  ✓ 匹配到: 太阳 ☀️

[2] 对象信息:
  名称: Earth_Model_001
  类型: Mesh
  位置: x:15.20, y:0.00, z:5.30
  尺寸: 2.00 x 2.00 x 2.00
  父级: Planets_Group
  ✓ 匹配到: 地球 🌍

[3] 对象信息:
  名称: Unknown_Planet
  类型: Mesh
  位置: x:20.00, y:0.00, z:10.00
  尺寸: 1.50 x 1.50 x 1.50
  父级: 根节点
  ⚠ 未匹配到任何行星

...

========== 匹配结果汇总 ==========
已匹配的行星: ['Sun', 'Earth', 'Mars']
未匹配的产品: ['水星 ☿️', '金星 ♀️', '木星 ♃', ...]
=====================================
```

---

## 🎯 如何找到未匹配的行星

### 情况1：看到 "⚠ 未匹配到任何行星"

这个对象可能就是你要找的行星！

**示例**：
```
[5] 对象信息:
  名称: Planet_Venus_Mesh
  类型: Mesh
  位置: x:8.50, y:0.00, z:3.20
  尺寸: 1.20 x 1.20 x 1.20
  父级: Solar_System
  ⚠ 未匹配到任何行星
```

这个对象的名称是 `Planet_Venus_Mesh`，包含 `Venus`，应该是金星！

### 情况2：根据位置判断

太阳系中行星按距离排列：
1. **太阳** - 位置 (0, 0, 0) 或接近原点
2. **水星** - 离太阳最近
3. **金星** - 第二近
4. **地球** - 第三
5. **火星** - 第四
6. **木星** - 很大，较远
7. **土星** - 有光环，很大
8. **天王星** - 很远
9. **海王星** - 最远

**根据 `位置` 和 `尺寸` 判断**：
- 位置越远，可能是外行星
- 尺寸很大 (>5) 可能是木星或土星
- 位置在 (0,0,0) 可能是太阳

---

## 🛠️ 如何修复未匹配的行星

### 方法1：添加关键词

找到未匹配的对象名称后，在代码中添加关键词。

**示例**：你发现名为 `Planet_Mars_Red` 的对象没有被识别。

编辑 `src/components/SolarSystem.vue` 第 20 行：

```javascript
{ 
  name: "Mars", 
  displayName: "火星 ♂️", 
  icon: "♂️", 
  product: "产品D - 探索系统", 
  keywords: ["mars", "planet_mars_red"] // 添加完整名称
}
```

保存后刷新页面，再看控制台应该会显示 `✓ 匹配到: 火星 ♂️`。

### 方法2：使用对象编号手动指定

如果对象没有名称，可以通过编号找到它。

**示例**：控制台显示：
```
[7] 对象信息:
  名称: (未命名)
  位置: x:14.50, y:0.00, z:5.00
  尺寸: 0.80 x 0.80 x 0.80
  ⚠ 未匹配到任何行星
```

根据位置和尺寸判断这是水星，可以在 `loadSolarSystem` 函数中手动指定：

```javascript
solarSystemModel.traverse((child) => {
  if (child.isMesh) {
    meshIndex++;
    
    // 手动指定第7个网格为水星
    if (meshIndex === 7) {
      planetObjects['Mercury'] = child;
      console.log('  ✓ 手动匹配: 水星');
    }
    
    // ... 其他代码
  }
});
```

---

## 📊 调试技巧

### 技巧1：使用控制台搜索

在控制台按 `Ctrl+F` 搜索关键词：
- 搜索 `⚠ 未匹配` - 找到所有未识别的对象
- 搜索 `位置:` - 查看所有对象位置
- 搜索 `尺寸:` - 查看所有对象大小

### 技巧2：根据尺寸识别

参考尺寸（相对大小）：
- **太阳**: 最大 (10-20)
- **木星**: 很大 (5-8)
- **土星**: 大 (4-7)
- **地球/金星/天王星/海王星**: 中等 (2-3)
- **火星/水星**: 小 (1-2)

### 技巧3：导出模型信息

在控制台运行：
```javascript
copy(JSON.stringify(Object.keys(planetObjects)))
```
这会复制已识别的行星列表到剪贴板。

---

## 🎯 点击导航调试

### 当点击产品无法定位时

控制台会显示：
```
🎯 导航到 地球 🌍
  行星位置: Vector3 {x: 15.2, y: 0, z: 5.3}
  行星尺寸: Vector3 {x: 2.0, y: 2.0, z: 2.0}
  观察距离: 10
  目标相机位置: Vector3 {x: 18.2, y: 5.0, z: 15.3}
  当前相机位置: Vector3 {x: 0, y: 50, z: 150}
  开始移动相机...
  ✓ 相机移动完成
```

**如果没有看到这些信息**，说明行星未被识别，需要按上面的方法添加关键词。

---

## 🔧 常见问题

### Q1: 所有对象都显示 "⚠ 未匹配到任何行星"

**原因**: 模型中的对象命名不符合预期。

**解决**: 
1. 查看所有对象的名称
2. 为每个产品添加实际的对象名称作为关键词

**示例**：
```javascript
const products = [
  { name: "Sun", keywords: ["sun", "实际对象名称1"] },
  { name: "Mercury", keywords: ["mercury", "实际对象名称2"] },
  // ...
];
```

### Q2: 点击产品后相机没有移动

**检查清单**：
1. ✅ 控制台是否显示 `✓ 匹配到: xxx`？
2. ✅ 点击后是否看到 `🎯 导航到` 日志？
3. ✅ 是否看到 `开始移动相机...` 和 `✓ 相机移动完成`？

如果第1步就失败，说明行星未识别。
如果第2步失败，检查是否正确点击了产品按钮。
如果第3步失败，可能是GSAP动画问题。

### Q3: 缩放还是太慢

修改 `src/components/SolarSystem.vue` 第 133 行：

```javascript
controls.zoomSpeed = 3.0; // 改为更大的值，如 5.0
```

### Q4: 找不到某个行星的位置

在控制台运行：
```javascript
// 显示所有未识别的对象
solarSystemModel.traverse(child => {
  if (child.isMesh && !Object.values(planetObjects).includes(child)) {
    console.log('未识别:', child.name, child.position);
  }
});
```

---

## ✅ 完整工作流程

1. **刷新页面** → 按 F12 打开控制台
2. **查看日志** → 找到 `========== GLB 模型结构调试信息 ==========`
3. **查找未匹配** → 搜索 `⚠ 未匹配`
4. **记录名称** → 记下未匹配对象的名称
5. **修改代码** → 在 `keywords` 中添加实际名称
6. **保存刷新** → 验证是否匹配成功
7. **测试导航** → 点击产品按钮测试

---

## 📞 需要帮助？

如果按照以上步骤还是无法识别行星：

1. **复制控制台日志**：
   - 右键控制台 → 全选 → 复制
   - 将日志发给我

2. **提供具体信息**：
   - 哪个行星无法识别？
   - 控制台显示了什么？
   - 有没有看到 `[数字] 对象信息:` 的日志？

3. **截图**：
   - 截图控制台的输出
   - 截图3D场景中的模型

我会根据这些信息帮你准确定位问题！🚀

